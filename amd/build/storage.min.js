/**
 * IndexedDB storage utility for persistent resize plugin
 *
 * @module     tiny_persistentresize/storage
 * @copyright  2025 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
const DB_NAME="tiny_persistentresize",DB_VERSION=1,STORE_NAME="editorSizes",openDB=()=>new Promise((e,o)=>{const t=indexedDB.open(DB_NAME,1);t.onerror=()=>o(t.error),t.onsuccess=()=>e(t.result),t.onupgradeneeded=e=>{const o=e.target.result;o.objectStoreNames.contains(STORE_NAME)||o.createObjectStore(STORE_NAME)}});export const setItem=async(e,o)=>{const t=await openDB();return new Promise((r,n)=>{const s=t.transaction([STORE_NAME],"readwrite"),c=s.objectStore(STORE_NAME).put(o,e);c.onerror=()=>n(c.error),c.onsuccess=()=>r(),s.oncomplete=()=>t.close()})};export const getItem=async e=>{const o=await openDB();return new Promise((t,r)=>{const n=o.transaction([STORE_NAME],"readonly"),s=n.objectStore(STORE_NAME).get(e);s.onerror=()=>r(s.error),s.onsuccess=()=>t(s.result||null),n.oncomplete=()=>o.close()})};export const removeItem=async e=>{const o=await openDB();return new Promise((t,r)=>{const n=o.transaction([STORE_NAME],"readwrite"),s=n.objectStore(STORE_NAME).delete(e);s.onerror=()=>r(s.error),s.onsuccess=()=>t(),n.oncomplete=()=>o.close()})};export const getAllKeys=async()=>{const e=await openDB();return new Promise((o,t)=>{const r=e.transaction([STORE_NAME],"readonly"),n=r.objectStore(STORE_NAME).getAllKeys();n.onerror=()=>t(n.error),n.onsuccess=()=>o(n.result||[]),r.oncomplete=()=>e.close()})};
//# sourceMappingURL=storage.min.js.map