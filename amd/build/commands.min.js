define("tiny_persistentresize/commands",["exports","editor_tiny/utils","core/str","tiny_persistentresize/common","core/notification","core/modal_factory","core/modal_events"],function(e,t,n,i,o,r,s){"use strict";
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
e.getSetup=async()=>{const[e,a,c,l,g,m,_,h,d]=await Promise.all([n.get_string("menutitle",i.component),t.getButtonImage("menuicon",i.component),n.get_string("confirmationtitle",i.component),n.get_string("confirmationmessage",i.component),n.get_string("clearallmenutitle",i.component),n.get_string("clearallconfirmtitle",i.component),n.get_string("clearallconfirmmessage",i.component),n.get_string("clearallsuccesstitle",i.component),n.get_string("clearallsuccessmessage",i.component)]);return t=>{t.ui.registry.addIcon(i.icon,a.html),t.ui.registry.addMenuItem(i.buttonName,{icon:i.icon,text:e,onAction:()=>{const e=t.getElement(),n=localStorage.getItem(`tiny_persistentresize_height_${e.id}_default`);t.editorContainer.style.height=n,localStorage.removeItem(`tiny_persistentresize_height_${e.id}`),localStorage.removeItem(`tiny_persistentresize_height_${e.id}_default`),o.alert(c,l)}}),t.ui.registry.addMenuItem(i.clearAllButtonName,{icon:i.icon,text:g,onAction:()=>{r.create({type:r.types.SAVE_CANCEL,title:m,body:_}).then(e=>(e.setSaveButtonText(n.get_string("yes","core")),e.getRoot().on(s.save,()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("tiny_persistentresize_height_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e));const n=t.getElement(),i=localStorage.getItem(`tiny_persistentresize_height_${n.id}_default`);i&&(t.editorContainer.style.height=i),o.alert(h,d)}),e.show(),e)).catch(o.exception)}}),t.on("init",()=>{const e=t.getElement();localStorage.setItem(`tiny_persistentresize_height_${e.id}_default`,t.editorContainer.style.height);const n=localStorage.getItem(`tiny_persistentresize_height_${e.id}`);n&&(t.editorContainer.style.height=n)}),t.on("ResizeEditor",function(){const e=t.getElement();localStorage.setItem(`tiny_persistentresize_height_${e.id}`,t.editorContainer.style.height)})}}});
//# sourceMappingURL=commands.min.js.map
